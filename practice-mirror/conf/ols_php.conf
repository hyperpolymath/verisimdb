# conf/ols_php.conf
# OpenLiteSpeed PHP Configuration

# This section typically goes into server-level configuration.
# For simplicity in container, we assume a single PHP handler.

# Define the PHP 8.4 FPM external app
# This connects OpenLiteSpeed to the PHP-FPM service
externalApp {
  name                  php84
  address               uds:///run/php/php84-fpm.sock # Use Unix socket for performance
  maxConns              10
  env                   PHP_LSAPI_CHILDREN=10
  initReqTimeout        60
  retryTimeout          0
  respBuffer            0
  autoStart             1
  path                  /usr/bin/php-fpm84 # Path to PHP-FPM executable
  extProcessor          LSAPI
}

# Define the PHP 8.4 FPM server-level script handler
scriptHandler {
  add                 php84:{suffix:php}
}

# PHP-FPM Configuration (often separate)
# This is usually managed by the PHP-FPM package itself.
# However, ensure the php-fpm.conf and www.conf are correctly set up.
# For Alpine, PHP-FPM configs are typically in /etc/php84/php-fpm.d/www.conf
# We will ensure this is started in the startup script.

# Example /etc/php84/php-fpm.d/www.conf relevant settings:
# listen = /run/php/php84-fpm.sock
# listen.owner = litespeed
# listen.group = litespeed
# user = litespeed
# group = litespeed
