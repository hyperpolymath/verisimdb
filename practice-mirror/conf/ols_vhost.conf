# conf/ols_vhost.conf
# OpenLiteSpeed Virtual Host Configuration for WordPress

docRoot                     $VH_ROOT/html/wordpress/
enableGzip                  1
allowBrowse                 0
exampleScripts              0
indexFile                   index.php, index.html

errorlog {
  fileName                  $VH_ROOT/logs/error.log
  logLevel                  INFO
  debugLevel                0
}

accesslog {
  fileName                  $VH_ROOT/logs/access.log
  logHeaders                7
  logMode                   2
}

scriptHandler {
  suffix                    php
  handler                   php84 # Reference the PHP handler defined in server-level config
  runOnStartup              OFF
}

rewrite {
  enable                    1
  autoLoadHtaccess          1
  # WordPress rewrite rules
  rewriteRule               ^/index\.php$ - [L]
  rewriteCond               %{REQUEST_FILENAME} !-f
  rewriteCond               %{REQUEST_FILENAME} !-d
  rewriteRule               . /index.php [L]
}

# Add Security Headers
header {
  add                     Strict-Transport-Security "max-age=31536000; includeSubDomains"
  add                     X-Frame-Options "SAMEORIGIN"
  add                     X-Content-Type-Options "nosniff"
  add                     X-XSS-Protection "1; mode=block"
  add                     Referrer-Policy "no-referrer-when-downgrade"
  add                     Permissions-Policy "geolocation=(), microphone=(), camera=()"
}

# Set up caching for static files
# expiresByType {
#   image/*                    A1296000
#   text/css                   A604800
#   application/javascript     A604800
# }
